"use strict";(self["webpackChunkbridgefabric"]=self["webpackChunkbridgefabric"]||[]).push([[631],{8631:function(t,e,a){a.r(e),a.d(e,{default:function(){return M}});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h3",{staticClass:"font-weight-thin text-h3 mt-10"},[t._v(t._s(t.total)+" Nodes")]),a("v-data-table",{staticClass:"elevation-2 mt-15",attrs:{headers:t.tableHeaders,items:t.tableItems,loading:t.loading,page:t.query.page,"items-per-page":t.query.limit_num,"sort-by":"calories"},on:{"update:items-per-page":t.handleCount},scopedSlots:t._u([{key:"item.price",fn:function(e){var n=e.item;return[a("span",[t._v(t._s(n.price)+" BFT")])]}},{key:"item.action",fn:function(e){var n=e.item;return[a("form-dialog",{attrs:{node:n.node},on:{"on-success":t.handleSearch}}),a("get-dialog",{attrs:{node:n.node}})]}},{key:"default",fn:function(){},proxy:!0},{key:"no-data",fn:function(){return[t._v("No data")]},proxy:!0}])})],1)},o=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-btn",t._g(t._b({attrs:{"x-medium":"",rounded:""}},"v-btn",o,!1),n),[a("v-icon",{staticClass:"mr-3"},[t._v("mdi-wallet")]),t._v(" Buy Count ")],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[t._v("Buy acotor call amount form node")])]),a("v-card-text",[a("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-container",[a("v-content",[t._v("NodeID: "+t._s(t.node))]),a("v-text-field",{attrs:{label:"Actor CID",rules:t.rule.actor,required:""},model:{value:t.form.actor,callback:function(e){t.$set(t.form,"actor",e)},expression:"form.actor"}}),a("v-text-field",{attrs:{label:"Amount",rules:t.rule.amount,min:1,type:"number",required:""},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",t._n(e))},expression:"form.amount"}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("Close")]),a("v-btn",{attrs:{color:"primary",text:"",loading:t.submitting},on:{click:t.handleSubmit}},[t._v("Save ")])],1)],1)],1)},i=[],l=a(1423),s={props:["node"],data:()=>({dialog:!1,valid:!1,serverItems:[],loadingServer:!1,submitting:!1,form:{name:"",host:"",port:null,out_port:null},rule:{actor:[t=>!!t||"Actor is required"],amount:[t=>!!t||"Amount is required"]}}),methods:{async handleSubmit(){this.submitting=!0;const t={...this.form},e=await(0,l.iK)(this.node,t.actor,t.amount);e!==l.r8?this.$message.warning("buy failed"):this.$message.success("buy success"),this.submitting=!1,this.dialog=!1}}},c=s,d=a(1001),u=a(3453),m=a.n(u),v=a(680),h=a(3237),p=a(7118),f=a(8050),g=a(7877),b=a(1824),x=g.Z.extend({name:"v-main",created(){(0,b.Rn)("v-content","v-main",this)},render(t){const e=g.Z.options.render.call(this,t);return e.data.staticClass+=" v-content",e.children[0].data.staticClass+=" v-content__wrap",t(e.tag,e.data,e.children)}}),_=a(7336),y=a(6232),C=a(6428),k=a(9762),V=a(5978),Z=(0,d.Z)(c,r,i,!1,null,null,null),w=Z.exports;m()(Z,{VBtn:v.Z,VCard:h.Z,VCardActions:p.h7,VCardText:p.ZB,VCardTitle:p.EB,VContainer:f.Z,VContent:x,VDialog:_.Z,VForm:y.Z,VIcon:C.Z,VSpacer:k.Z,VTextField:V.Z});var I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-btn",t._g(t._b({attrs:{"x-medium":"",rounded:""}},"v-btn",o,!1),n),[a("v-icon",{staticClass:"mr-3"},[t._v("mdi-search-web")]),t._v(" Query Count ")],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[t._v("Query acotor call amount left")])]),a("v-card-text",[a("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-container",[a("v-content",[t._v("NodeID: "+t._s(t.node))]),a("v-text-field",{attrs:{label:"Actor CID",rules:t.rule.actor,required:""},model:{value:t.form.actor,callback:function(e){t.$set(t.form,"actor",e)},expression:"form.actor"}}),a("v-content",{staticClass:"text-center",staticStyle:{color:"rgb(253 224 71)"}},[t._v("Count Left: "+t._s(t.left))])],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("Close")]),a("v-btn",{attrs:{color:"primary",text:"",loading:t.submitting},on:{click:t.getAmount}},[t._v("Query ")])],1)],1)],1)},A=[],S={props:["node"],data:()=>({dialog:!1,valid:!1,serverItems:[],loadingServer:!1,submitting:!1,form:{name:"",host:"",port:null,out_port:null},left:"N/A",rule:{actor:[t=>!!t||"Actor is required"]}}),methods:{async getAmount(){this.submitting=!0;const t={...this.form};this.left=await(0,l.aS)(this.node,t.actor,t.amount),this.submitting=!1}}},T=S,q=(0,d.Z)(T,I,A,!1,null,null,null),D=q.exports;m()(q,{VBtn:v.Z,VCard:h.Z,VCardActions:p.h7,VCardText:p.ZB,VCardTitle:p.EB,VContainer:f.Z,VContent:x,VDialog:_.Z,VForm:y.Z,VIcon:C.Z,VSpacer:k.Z,VTextField:V.Z});var B=a(476),N={components:{FormDialog:w,GetDialog:D},data:()=>({loading:!1,query:{name:"",page:1,limit_num:15},tableHeaders:[{text:"NodeID",value:"node"},{text:"Price per call",value:"price"},{text:"Action",value:"action",width:"380px"}],tableItems:[],total:0}),created(){this.addNetwork(),this.getTableItems()},methods:{addNetwork(){window.ethereum||this.$message.error("Please install metamask"),window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x13881",chainName:"Mumbai",rpcUrls:["https://matic-mumbai.chainstacklabs.com"],blockExplorerUrls:["https://mumbai.polygonscan.com"],nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18}}]})},handleSearch(){this.query.page=1,this.getTableItems()},async getTableItems(){this.loading=!0,this.tableItems=await(0,l.cb)(),this.total=this.tableItems.length,this.loading=!1},async buy(t){B.log(t)},async queryAmount(t){},handleCount(t){}}},$=N,E=a(1229),F=(0,d.Z)($,n,o,!1,null,null,null),M=F.exports;m()(F,{VDataTable:E.Z})}}]);
//# sourceMappingURL=631.c692970f.js.map